import {
  InlineKeyboard,
  Keyboard,
} from "https://deno.land/x/grammy@v1.37.0/mod.ts";

const supportURL = Deno.env.get("SUPPORT_CHAT_URL") || "";
const paymentURL = Deno.env.get("PAYMENT_URL") || "";

const helloMessage = `
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FitClean!

–ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –Ω–æ—Å–∏—Ç—å —Ä—é–∫–∑–∞–∫ —Å –≤–µ—â–∞–º–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ú—ã —Å—Ç–∏—Ä–∞–µ–º, —Ö—Ä–∞–Ω–∏–º –∏ –≤—ã–¥–∞—ë–º –≤–∞—à—É –æ–¥–µ–∂–¥—É –∏ –æ–±—É–≤—å –ø—Ä—è–º–æ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ.

–í—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π, –∞ –º—ã –∑–∞–±–æ—Ç–∏–º—Å—è –æ —Å–≤–µ–∂–µ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–∏–∑–∏—Ç—É.

–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ –∏ —Å–¥–∞–π—Ç–µ –æ–¥–µ–∂–¥—É –∏ –æ–±—É–≤—å.`;

const payMessage = `
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ –±–æ—Ç—É
${paymentURL}
`;

const registerMessage = `–û—Ç–ª–∏—á–Ω–æ! –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§.–ò.–û`;

const registerKey = new InlineKeyboard()
  .text("üîò –ù–∞—á–∞—Ç—å", "register")
  .row()
  .text("–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?", "about")
  .row()
  .text("–ö–∞–∫ –º—ã –∑–∞–±–æ—Ç–∏–º—Å—è –æ –≤–∞—à–µ–π —Ñ–æ—Ä–º–µ?", "care")
  .row();

  const menuBut = new InlineKeyboard()
  .text("–ú–µ–Ω—é", "menu")
  .row();

const aboutMessage = `
–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ ‚Äî —Ä–∞–∑–æ–≤–∞—è —Å—Ç–∏—Ä–∫–∞ –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞.

2Ô∏è‚É£ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É ‚Äî –∏–º—è, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–æ–º–µ—Ä –º–µ—à–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Å—Ç–∏—Ä–∫–∏.

3Ô∏è‚É£ –û–ø–ª–∞—Ç–∏—Ç–µ –∑–∞–∫–∞–∑ –æ–Ω–ª–∞–π–Ω ‚Äî –¥–ª—è –æ–ø–ª–∞—Ç—ã –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π –≤ Kaspi.

4Ô∏è‚É£ –ó–∞–∫–∏–Ω—å—Ç–µ –æ–¥–µ–∂–¥—É –∏ –æ–±—É–≤—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è –º—ã –∑–∞–±–µ—Ä—ë–º –≤–µ—â–∏ –Ω–∞ —Å—Ç–∏—Ä–∫—É –∏ –æ–ø–æ–≤–µ—Å—Ç–∏–º –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º.

5Ô∏è‚É£ –ó–∞–±–µ—Ä–∏—Ç–µ —á–∏—Å—Ç—É—é –æ–¥–µ–∂–¥—É –∏ –æ–±—É–≤—å ‚Äî –Ω–µ –±–æ–ª–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 48 —á–∞—Å–æ–≤ –∏–ª–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ.`;

const careMessage = `
–ö–∞–∫ –º—ã –∑–∞–±–æ—Ç–∏–º—Å—è –æ –≤–∞—à–µ–π —Ñ–æ—Ä–º–µ?

–ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å —Ç—Ä–µ–±—É—é—Ç –æ—Å–æ–±–æ–≥–æ —É—Ö–æ–¥–∞. –ü–æ—ç—Ç–æ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏ –±–µ—Ä–µ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

üî∏ –†–∞–∑–¥–µ–ª—å–Ω–∞—è —Å—Ç–∏—Ä–∫–∞ –ø–æ —Ü–≤–µ—Ç—É –∏ —Ç–∏–ø—É —Ç–∫–∞–Ω–∏ ‚Äî –±–µ–ª–æ–µ –æ—Ç–¥–µ–ª—å–Ω–æ, —Ü–≤–µ—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª—å–Ω–æ, –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–µ —Ç–∫–∞–Ω–∏ –æ—Ç–¥–µ–ª—å–Ω–æ.

üî∏ –ì–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–∞–∂–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏.

üî∏ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—É—à–∫–∞ –±–µ–∑ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –º–∞—à–∏–Ω–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ ‚Äî —Ç–∫–∞–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ñ–æ—Ä–º—É –∏ –¥—ã—à–∞—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞.

üî∏ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—É–≤–∏: –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—è –∏ —Å—É—à–∫–∞, —á—Ç–æ–±—ã –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Å–≤–µ–∂–∏–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏.

–ú—ã –æ—Ç–Ω–æ—Å–∏–º—Å—è –∫ –≤–∞—à–∏–º –≤–µ—â–∞–º —Ç–∞–∫, –±—É–¥—Ç–æ —ç—Ç–æ –Ω–∞—à–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞, —á—Ç–æ–±—ã –Ω–∞ –∫–∞–∂–¥–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ –≤—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ —Å–µ–±—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ.`;

// Tariff selection keyboard
const tariffButtons = new InlineKeyboard()
  .text("–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å | 1 —Å—Ç–∏—Ä–∫–∞ / ‚Ç∏1,200", "tariff_trial")
  .row()
  .text("–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –Ω–µ–¥–µ–ª—è | 3 —Å—Ç–∏—Ä–∫–∏ | 1 –Ω–µ–¥–µ–ª—è / ‚Ç∏2,700", "tariff_weekly")
  .row()
  .text("–£–¥–æ–±–Ω—ã–π –º–µ—Å—è—Ü | 12 —Å—Ç–∏—Ä–æ–∫ | 1 –º–µ—Å—è—Ü / ‚Ç∏9,900", "tariff_monthly")
  .row()
  .text("–ë–µ–∑–∑–∞–±–æ—Ç–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª | 36 —Å—Ç–∏—Ä–æ–∫ | 3 –º–µ—Å—è—Ü–∞ / ‚Ç∏27,900", "tariff_quarter")
  .row()
  .text("–ü–æ–ª—É–≥–æ–¥–æ–≤–æ–µ —É–¥–æ–±—Å—Ç–≤–æ | 72 —Å—Ç–∏—Ä–∫–∏ | 6 –º–µ—Å—è—Ü–µ–≤ / ‚Ç∏49,900", "tariff_half_year")
  .row()
  .text("–ì–æ–¥ –±–µ–∑ –∑–∞–±–æ—Ç | 144 —Å—Ç–∏—Ä–∫–∏ | 12 –º–µ—Å—è—Ü–µ–≤ / ‚Ç∏99,900", "tariff_year")
  .row();

const menuButtons = new InlineKeyboard()
  .text("–°–¥–∞—Ç—å –æ–¥–µ–∂–¥—É", "order_create")
  .row()
  .text("–í—ã–¥–∞—Ç—å –∑–∞–∫–∞–∑ (–∫–æ–¥)", "pickup_verify")
  .row()
  .text("üì∏ –§–æ—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è", "photo_received")
  .text("üì∏ –§–æ—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏", "photo_processed")
  .row()
  .text("üì∏ –§–æ—Ç–æ –≥–æ—Ç–æ–≤–æ–≥–æ", "photo_ready")
  .text("üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", "notifications")
  .row()
  .text("–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç", "about")
  .text("–¢–∞—Ä–∏—Ñ—ã –∏ —Å—Ä–æ–∫–∏", "price")
  .row()
  .url("–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å", supportURL)
  .row();

const shareContact = new Keyboard()
  .requestContact("üìû –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º")
  .text("–û—Ç–º–µ–Ω–∞")
  .resized()
  .oneTime();

// Status-specific notification messages
const statusMessages = {
  orderAccepted: (orderNumber: string, date: string) => `
‚úÖ –í–∞—à–∞ –æ–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å –ø—Ä–∏–Ω—è—Ç–∞ –Ω–∞ —Å—Ç–∏—Ä–∫—É –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ!

–ù–æ–º–µ—Ä: ${orderNumber}
–î–∞—Ç–∞ —Å–¥–∞—á–∏: ${date}

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª–æ–∂–∏—Ç–µ –º–µ—à–æ–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä FitClean. –ú—ã –∑–∞–±–µ—Ä–µ–º –µ—ë –Ω–∞ —Å—Ç–∏—Ä–∫—É —É–∂–µ —Å–µ–≥–æ–¥–Ω—è.`,

  inProgress: () => `
üí¶ –ú—ã –ø—Ä–∏—Å—Ç—É–ø–∏–ª–∏ –∫ —Å—Ç–∏—Ä–∫–µ –í–∞—à–µ–π —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π —Ñ–æ—Ä–º—ã, –≤—Å–µ –ø–æ-–ø–ª–∞–Ω—É.`,

  processed: () => `
üß∫ –í–∞—à–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞ –≤—ã—Å—Ç–∏—Ä–∞–Ω–∞, —É–ø–∞–∫–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–Ω—ã–π –∑–∞–ª.`,

  readyForPickup: (code: string) => `
‚ú® –í–∞—à–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ —É–∂–µ –æ–∂–∏–¥–∞–µ—Ç –í–∞—Å –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–Ω–æ–º –∑–∞–ª–µ!

–ß—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å, –Ω–∞–∑–æ–≤–∏—Ç–µ –∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω–∞ —Ç–æ—á–∫–µ.

–í–∞—à –∫–æ–¥: ${code}

–ñ–¥–µ–º –í–∞—Å –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ!`,

  completed: (remainingItems?: number) => {
    let message = `
‚úÖ –í–∞—à–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤—ã–¥–∞–Ω–∞!
–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FitClean üôå`;
    
    if (remainingItems !== undefined && remainingItems >= 0) {
      message += `\n–û—Å—Ç–∞–ª–æ—Å—å —Å—Ç–∏—Ä–æ–∫: ${remainingItems}`;
    }
    
    message += `\n\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç 1 –¥–æ 5 ‚≠ê`;
    return message;
  }
};

// Rating buttons
const ratingButtons = new InlineKeyboard()
  .text("‚≠êÔ∏è1", "rate_1")
  .text("‚≠êÔ∏è2", "rate_2") 
  .text("‚≠êÔ∏è3", "rate_3")
  .text("‚≠êÔ∏è4", "rate_4")
  .text("‚≠êÔ∏è5", "rate_5")
  .row();

const reply = {
  messages: {
    hello: helloMessage,
    register: registerMessage,
    about: aboutMessage,
    care: careMessage,
    payMessage: payMessage,
    statusMessages: statusMessages,
  },
  buttons: {
    registerKey: registerKey,
    shareContact: shareContact,
    menuButtons: menuButtons,
    menuBut: menuBut,
    tariffButtons: tariffButtons,
    ratingButtons: ratingButtons,
  },
};

export default reply;
